<div class="text-center file-view-header clearfix">
  <div class="btn-group pull-left">
    <div class="file-name-label text-left">
      {{file.name}}
    </div>
    <span class="file-message" ng-show="file.message"><i>({{file.message}})</i></span>
  </div>

  <div class="btn-group pull-right">
    <button type="button" class="btn btn-default" uib-tooltip="Download this file" tooltip-append-to-body="true" ng-click="openFile()">
      <span class="fas fa-download"></span>
    </button>
    <button type="button" class="btn btn-default" ng-click="closeFile()">
      <span class="fas fa-times"></span>
    </button>
  </div>
</div>

<div class="text-center" style="position: relative;" ng-if="$stateParams.fileId">
  <div class="file-viewer-content">
    <dicom-viewer ng-if="!error && fileViewer == 'DicomViewer'" data-file="file" ></dicom-viewer>

    <zip-viewer ng-if="!error && fileViewer == 'ZipViewer'" data-file="file" ></zip-viewer>

    <!-- Standard preview -->
    <img ng-src="../api/file/{{ $stateParams.fileId }}/data?size=web"
         ng-init="error = false"
         img-error="error = true"
         ng-show="!error && fileViewer == 'ImageViewer'"/>

    <!-- Video player -->
    <a href class="video-overlay" ng-if="!error && fileViewer == 'VideoViewer'"
       ng-init="videoPlayer = false" ng-click="videoPlayer = true">
      <span class="fas fa-play-circle" ng-if="!videoPlayer"></span>
      <video ng-if="videoPlayer" autoplay="autoplay" loop="loop"
             controls="controls" ng-src="../api/file/{{ $stateParams.fileId }}/data"></video>
    </a>

    <!-- PDF viewer -->
    <iframe ng-src="{{ trustedFileUrl }}" class="pdf-viewer" scrolling="yes" ng-if="!error && fileViewer == 'PdfViewer'"></iframe>

    <!-- File not found -->
    <p class="well-lg" ng-show="error">
      <span class="fas fa-exclamation-triangle"></span>
      {{ 'file.view.not_found' | translate }}
    </p>
  </div>

  <button type="button" class="btn btn-default prev-file"
          ng-style="{ 'visibility': previousFile() ? 'visible' : 'hidden' }"
          ng-click="goPreviousFile()" title="{{ 'file.view.previous' | translate }}">
    <i class="fa fa-angle-left"></i>
  </button>
  <button type="button" class="btn btn-default next-file"
          ng-style="{ 'visibility': nextFile() ? 'visible' : 'hidden' }"
          ng-click="goNextFile()" title="{{ 'file.view.next' | translate }}">
    <i class="fa fa-angle-right"></i>
  </button>
</div>
